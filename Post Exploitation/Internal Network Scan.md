
* **Internal Network Scanning:**
    - *Commands to map network*:
      - Windows: `ipconfig`
      - Linux: `ifconfig`
      - Meterpreter: `ifconfig`
    - *Check routing table*:
      - Windows: `route print`
      - Linux: `route -v`
      - Meterpreter: `route`

* **Gather Network Info:**
    - Use `arp` to discover new hosts.
    - Display network connections:
      - `netstat`
    - *Key findings*: IPs, listening ports, established connections.

* **ARP Scanning:**
    - Use Metasploit module `arp_scanner` to scan local subnet (e.g., `10.10.10.0/24`).
    - Detect alive hosts and open ports with `ping_sweep` module.

* **Pivoting:**
    - Route traffic through compromised machines:
      - Add route in Metasploit: `route add 10.10.10.0 255.255.255.0 <session number>`
      - Use autoroute: `run autoroute -s 10.10.10.0/24`
      - Check routes: `autoroute -p`
    
* **Port Scanning via Pivot:**
    - Use `auxiliary/scanner/portscan/tcp` for TCP port scanning.
    - Example: `use auxiliary/scanner/portscan/tcp`

* **Proxy Setup (Metasploit + Proxychains):**
    - Set up Metasploit SOCKS4 proxy:
      - Module: `auxiliary/server/socks4a`
      - Set SRVHOST & SRVPORT (default is port 1080).
    - Configure Proxychains:
      - Update `/etc/proxychains.conf`: `socks4 127.0.0.1 1080`
    - Example command:
      - `proxychains nmap -sT -Pn -n <target IP> --top-ports 50`

* **Access Services via Proxychains:**
    - SSH: `proxychains ssh <target IP>`
    - Telnet: `proxychains telnet <target IP>`

* **Port Forwarding (Meterpreter):**
    - Forward local ports to internal network services:
      - `portfwd add -l <local port> -p <target port> -r <target IP>`
    - Example:
      - `portfwd add -l 3333 -p 3389 -r 10.10.10.5`
    - Use RDP:
      - `rdesktop 127.0.0.1:3333`

---

***The difference between local port forwarding and remote port forwarding lies in the direction of traffic flow and the type of service being exposed:***

|               | **Local Port Forwarding**                          | **Remote Port Forwarding**                            |
| ------------- | -------------------------------------------------- | ----------------------------------------------------- |
| **Direction** | Local port to remote service                       | Remote port to local service                          |
| **Purpose**   | Access remote service from local machine           | Expose local service to remote machine/network        |
| **Example**   | Forward RDP from an internal network to local port | Make local web server accessible to external machines |

Both techniques are used to bypass firewall restrictions and control access to services behind NAT or restrictive network policies.